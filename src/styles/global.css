@import 'tailwindcss';
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

/* ==========================================================================
   Theme Configuration
   ========================================================================== */

@theme {
  --font-sans: 'Inter Variable', system-ui, -apple-system, sans-serif;
  --font-mono: 'JetBrains Mono Variable', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;

  --color-foreground: #000000;
  --color-foreground-dark: #ffffff;
  --color-background: #ffffff;
  --color-background-dark: #000000;
}

/* ==========================================================================
   Base Styles
   ========================================================================== */

html {
  scroll-padding-top: 4rem;
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-sans);
  @apply bg-background text-foreground dark:bg-background-dark dark:text-foreground-dark;
}

/* ==========================================================================
   Accessibility
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

*:focus-visible {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only:focus,
.sr-only:active {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* ==========================================================================
   Animation Keyframes
   ========================================================================== */

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInLeft {
  from { opacity: 0; transform: translateX(-20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(30px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes expandWidth {
  from { width: 0; }
  to { width: 4rem; }
}

/* ==========================================================================
   Animation Utility Classes
   ========================================================================== */

.animate { animation: fadeIn 0.6s ease-in-out; }
.animate-fade-in-up { animation: fadeInUp 0.5s ease-out both; }
.animate-fade-in-left { animation: fadeInLeft 0.5s ease-out both; }
.animate-scale-in { animation: scaleIn 0.4s ease-out both; }
.animate-slide-in-right { animation: slideInRight 0.5s ease-out both; }
.animate-expand-width { animation: expandWidth 0.6s ease-out 0.3s both; }

/* Staggered delays */
.animate-delay-100 { animation-delay: 100ms; }
.animate-delay-200 { animation-delay: 200ms; }
.animate-delay-300 { animation-delay: 300ms; }
.animate-delay-400 { animation-delay: 400ms; }
.animate-delay-500 { animation-delay: 500ms; }

/* ==========================================================================
   Component Animations
   ========================================================================== */

/* Mobile menu */
#mobile-menu {
  transition: transform 300ms ease-in-out;
}

#mobile-menu.mobile-nav-open {
  @apply translate-x-0;
}

/* Details/Summary accordion */
details > *:not(summary) {
  overflow: hidden;
}

details[open] > *:not(summary) {
  animation: slideDown 0.4s ease-out both;
}

/* ==========================================================================
   Layout
   ========================================================================== */

.container {
  @apply mx-auto px-4 sm:px-6 md:px-8 lg:px-12;
  max-width: 64rem;
}

/* ==========================================================================
   Reusable Utility Classes
   ========================================================================== */

/* Text utilities */
.text-muted {
  @apply text-sm text-foreground/60 dark:text-foreground-dark/60;
}

.text-muted-sm {
  @apply text-sm text-foreground/70 dark:text-foreground-dark/70;
}

.text-heading {
  @apply font-semibold text-black dark:text-white;
}

.text-heading-sm {
  @apply text-sm font-semibold text-black dark:text-white;
}

.text-heading-lg {
  @apply text-lg font-semibold;
}

.text-heading-2xl {
  @apply text-2xl font-semibold text-black dark:text-white;
}

/* Flex utilities */
.flex-center {
  @apply flex items-center;
}

.flex-between {
  @apply flex items-center justify-between;
}

.flex-center-gap-2 {
  @apply flex items-center gap-2;
}

.flex-center-gap-3 {
  @apply flex items-center gap-3;
}

/* Border utilities */
.border-subtle {
  @apply border border-foreground/10 dark:border-background-dark/40;
}

/* ==========================================================================
   Rich Text (Blog Posts)
   ========================================================================== */

.rich-text {
  @apply prose prose-sm max-w-none dark:prose-invert;
}

/* Hide excerpt marker comments */
.rich-text > comment,
.rich-text > *:empty {
  display: none;
}

/* Headings */
.rich-text h2 {
  @apply scroll-mt-24 text-2xl font-semibold tracking-tight;
}

.rich-text h3 {
  @apply text-xl font-semibold tracking-tight;
}

/* Text */
.rich-text p {
  @apply leading-relaxed;
}

.rich-text li {
  @apply leading-relaxed;
}

/* Links */
.rich-text a {
  @apply underline underline-offset-2 decoration-black/15 dark:decoration-white/30 transition-colors duration-300 hover:decoration-black/25 hover:dark:decoration-white/50;
  color: currentColor;
}

.rich-text a:hover {
  @apply text-black dark:text-white;
}

/* Code */
.rich-text code {
  @apply bg-black/5 dark:bg-white/10 px-1.5 py-0.5 rounded text-sm font-mono;
}

.rich-text pre {
  @apply bg-black dark:bg-white text-white dark:text-black p-4 rounded overflow-auto;
}

.rich-text pre code {
  @apply bg-transparent p-0;
}

/* Blockquotes */
.rich-text blockquote {
  @apply border-l-4 border-black/15 dark:border-white/30 pl-4 italic;
}

/* Lists */
.rich-text ul,
.rich-text ol {
  @apply space-y-2 pl-6;
}

/* Images */
.rich-text img {
  @apply rounded;
}
