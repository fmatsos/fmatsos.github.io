---
import Card from '../atoms/Card.astro';
import Badge from '../atoms/Badge.astro';
import Link from '../atoms/Link.astro';
import TagList from './TagList.astro';

interface Props {
  title: string;
  description: string;
  pubDate: Date;
  slug: string;
  tags: string[];
  lang?: 'fr' | 'en';
}

const { title, description, pubDate, slug, tags, lang = 'fr' } = Astro.props;

const dateFormatter = new Intl.DateTimeFormat(lang === 'fr' ? 'fr-FR' : 'en-US', { dateStyle: 'long' });
const readMoreText = lang === 'fr' ? "Lire l'article" : 'Read article';
const postUrl = `/blog/${slug}`;
---

<div class="space-y-3 border-b border-foreground/10 pb-6 dark:border-background-dark/30 transition-all duration-300 hover:translate-x-1">
  <div class="flex items-center justify-between gap-2 text-sm text-foreground/60 dark:text-foreground-dark/60">
    <time datetime={pubDate.toISOString()}>
      {dateFormatter.format(pubDate)}
    </time>
    <TagList tags={tags} />
  </div>

  <div>
    <h3 class="font-semibold text-black dark:text-white">
      <Link href={postUrl}>
        {title}
      </Link>
    </h3>
    <p class="mt-1 text-foreground/70 dark:text-foreground-dark/70">{description}</p>
  </div>

  <Link href={postUrl} class="inline-flex items-center gap-2 text-sm group">
    <span>{readMoreText}</span>
    <span class="group-hover:translate-x-1 transition-transform" aria-hidden="true">â†’</span>
  </Link>
</div>
