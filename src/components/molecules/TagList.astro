---
import Badge from '../atoms/Badge.astro';
import Link from '../atoms/Link.astro';
import { tagClasses, tagHref } from '../../utils/tags';

interface Props {
  tags: string[];
  variant?: 'default' | 'primary';
  clickable?: boolean;
  lang?: 'fr' | 'en';
}

const { tags, variant = 'default', clickable = true, lang = 'fr' } = Astro.props;
const tagsLabel = lang === 'fr' ? 'Tags' : 'Tags';
// Filter out 'blog' tag from display (implicitly tagged)
const displayTags = tags.filter(tag => tag.toLowerCase() !== 'blog');
---

<div class="flex flex-wrap gap-2" role="list" aria-label={tagsLabel}>
  {displayTags.map((tag) => (
    <div role="listitem">
      {clickable ? (
        <Link href={tagHref(tag)} class="no-underline" ariaLabel={lang === 'fr' ? `Articles taggÃ©s ${tag}` : `Posts tagged ${tag}`}>
          <Badge variant={variant} class={`transition hover:opacity-75 ${tagClasses(tag)}`}>
            {tag}
          </Badge>
        </Link>
      ) : (
        <Badge variant={variant} class={tagClasses(tag)}>
          {tag}
        </Badge>
      )}
    </div>
  ))}
</div>
