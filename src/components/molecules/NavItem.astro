---
import Link from '../atoms/Link.astro';

interface Props {
  href: string;
  currentPath?: string;
  class?: string;
  lang?: 'fr' | 'en';
}

const { href, currentPath = '/', class: className = '', lang = 'fr' } = Astro.props;
const isActive = currentPath === href || (href !== '/' && currentPath.startsWith(href));
const activeClasses = isActive ? 'text-primary dark:text-primary-dark' : 'text-foreground dark:text-foreground-dark';
const currentPageText = lang === 'fr' ? '(page actuelle)' : '(current page)';
---

<Link
  href={href}
  class={`font-semibold transition hover:text-primary dark:hover:text-primary-dark ${activeClasses} ${className}`}
  ariaLabel={isActive ? `${Astro.slots.render('default')} ${currentPageText}` : undefined}
  aria-current={isActive ? 'page' : undefined}
>
  <slot />
</Link>
