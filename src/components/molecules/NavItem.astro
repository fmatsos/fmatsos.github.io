---
import Link from '../atoms/Link.astro';

interface Props {
  href: string;
  currentPath?: string;
  class?: string;
  lang?: 'fr' | 'en';
}

const { href, currentPath = '/', class: className = '', lang = 'fr' } = Astro.props;
const isActive = currentPath === href || (href !== '/' && currentPath.startsWith(href));
const activeClasses = isActive ? 'text-primary dark:text-primary-dark' : 'text-foreground dark:text-foreground-dark';
const currentPageText = '(page actuelle)';
const slotContent = await Astro.slots.render('default');
const ariaLabelText = isActive ? `${slotContent.replace(/<[^>]*>/g, '')} ${currentPageText}` : undefined;
---

<Link
  href={href}
  class={`font-semibold transition-all duration-500 ease-out hover:text-primary dark:hover:text-primary-dark hover:translate-y-[-2px] ${activeClasses} ${className}`}
  ariaLabel={ariaLabelText}
  aria-current={isActive ? 'page' : undefined}
>
  <slot />
</Link>
